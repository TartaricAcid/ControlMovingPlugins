# Control Moving Plugins
也许你可以称之为 **“保护墙”** 插件……

之前有个朋友想做一个 RPG 任务，让玩家逐层解锁游戏区域。然而现有插件貌似没有能够逐层解锁的。本来我想用 GP 插件尝试下，GP 插件貌似是依据玩家来判定地皮权限的。如果给了玩家 A 信任权限，玩家 A 可以访问我名下所有的地皮。很显然，这对于一个逐层解锁的需求是做不到的（亦或是我对 GP 插件不了解？）。

我开始尝试自己书写插件，然后 sponge 官方文档结构乱，很多细节也没说明，着实让我看着很糟心。好在Sponge 咕咕复读势力交流群的群员们都很热心，帮助我解决了不少问题，再此对他们表示感谢。

由于是第一次书写 sponge 插件，很多概念还没有形成，还请看到这个插件的朋友多批评指教。

## 插件文档

Control Moving 插件是一个基于 Sponge Api 7.1.0 版本的插件，能够通过原版的羽毛左击、右击划定圈地。圈地内能够限定指定权限玩家进入。

- 玩家手持羽毛，左击、右击方块可以划定圈地的 pos1 和 pos2；
- 划定好区域（最小为 `5x5x5`），输入 `/cm name <名称> <数字>` 即可圈地；
- 使用骨头右击可以判断敲击方块是否被圈；
- 输入的数字决定着地皮进入的权限；

### 基础指令

|           指令           |           权限节点            |         备注         |
| :----------------------: | :---------------------------: | :------------------: |
| `/cm name <名称> <数字>` | `control_moving.command.main` | 划定好的区域进行圈定 |
|        `/cm list`        | `control_moving.command.main` |   打印输出所有圈地   |
|     `/cm del <名称>`     | `control_moving.command.main` |  删除指定名称的圈地  |

### 插件权限

|            权限节点            |                          备注                          |
| :----------------------------: | :----------------------------------------------------: |
| `control_moving.command.main`  |  所有该插件的指令权限、羽毛划定权限、骨头探测范围权限  |
| `control_moving.moving.bypass` |          拥有该权限玩家，可以忽略所有领地限制          |
|  `control_moving.moving.数字`  | 数字为设定领地时传入的数字，限定该数字领地是否允许进入 |

### 其他功能

- 骑乘玩家进入区域会强制解除骑乘状态；
- 进入非权限区域，或强制弹开，同时屏幕警告提示；
- 输入 `/cm list` 指令后，打印输出的列表，可以点击进行圈地删除，省去了手动输入的麻烦；
- 警告文字、圈地数据均可以通过配置文件修改，而后通过 Sponge 自带的 `/sponge plugins reload` 指令热重载；